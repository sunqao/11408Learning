# 计算机组成原理（二）：数据的机器级表示

## 数值数据的表示

**数值数据：**在数轴上可以找到确定的点的数据称为数值数据，无符号整数、带符号整数、浮点数（实数）、十进制数

**非数值数据：**逻辑数（包括位串）、西文字符和汉字等

计算机内部所有的信息都用01进行编码

**机器数：**用`0`和`1`编码的计算机内部的`0/1`序列

**真值：**机器数真正的值，即：现实中带正负号的数

**数值数据表示的三要素：**

1. 进位计数制（是几进制）
2. 定、浮点表示（小数点在哪里）
3. 如何用二进制编码（正负号用01编码，编码的方式是什么，反码，补码，原码?）

要确定一个数值数据的值必须先确定这三个要素

**定点数与浮点数：**小数点位置约定在固定位置的数称为定点数，小数点的位置可浮动的数称为浮点数，浮点数可用一个定点小数和一个定点整数来表示

**定点整数：**小数点总是固定在数的最右边

**定点小数：**小数点总是固定在数的最左边

## 定点数的编码

假设机器数`X`的序列为$X_nX_{n - 1}...X_0$一共`n + 1`位，其中第`n`位的`Xn`是符号位`0`表示正，`1`表示负，那么有

定点整数的真值：$X_T = \pm X_{n - 1}...X_0$

定点小数的真值：$X_T = \pm 0.X_{n - 1}...X_0$​

下面介绍的编码都在上述规定中进行

### 原码

原码带有符号位，原码表示法中，正数和负数的编码表示仅仅符号位不同，数值部分完全相同，原码的编码除了符号位外与真值的二进制序列完全一样，零的表示有两种

```
-10 : 10001010B
-0.625 : 11010000B
+0 : 000...0
-0 : 100...0
```

计算机中的整数都用补码表示，浮点数的尾数还用的是原码定点小数表示

### 补码

在模运算系统中，一个数与它除以模后的余数等价，时钟系统是一个非常典型的模12系统

**两个结论：**

1.  一个负数的补码等于模减该负数的绝对值
2. 对于某一确定的模，某数减去小于模的另一数，总可以用该数加上另一数负数的补码来代替

比如钟表的模12系统，假定钟表时针指向10点，要将它拨向６点，则有两种拨法

1. 倒拨4格：`10 - 4 = 6`
2. 顺拨8格：`10 + 8 = 18 ≡ 6（mod12)`

因此有`10 - 4 ≡ 10 + 8 (mod 12)`，即某数减去小于模的另一数，总可以用该数加上另一数负数的补码来代替

同时有`-4 ≡ 8 (mod 12)`一个负数的补码等于模减该负数的绝对值

**那么以上两个结论就实现了计算机中补码运算加和减的统一**，在计算机中如果有`n`位的话，那么就是一个模`2^n`的系统，当运算结果超出了`n`位的范围，这种情况称为溢出

**补码的定义：**

正数的补码是其本身，负数的补码为模与该负数的绝对值之差：

数$X_T$表示真值

当$X_T$为正数的时候有$[X_T]_补 = X_T = M + X_T (mod M)$

当$X_T$为负数的时候有$[X_T]_补 = M - X_T = M + X_T (mod M)$

因此对于任意一个数$X_T$的补码为$X_T = M + X_T (mod M)$

对于有一个符号位和`n - 1`位数值位的`n`位二进制定点整数的补码的定义为：$X_T = 2^n + X_T (mod 2^n)$，其中$-2^{n - 1} \le M_T <2^{n - 1}$

因此计算机就是一个模`2^n`的系统，当`n = 4`的时候可以表示的真值就是`0000 - 1111`如下图所示：

![image-20240213215201455](https://typora-1310242472.cos.ap-nanjing.myqcloud.com/typora_img/image-20240213215201455.png)

这个模系统对应的真值原本是`0 ~ 15`，不过`8 ~ 15`与`-8 ~ -1`同余，因此完全可以将`1000 ~ 1111`代替`-8 ~ -1`的原码，称为`-8 ~ -1`的补码